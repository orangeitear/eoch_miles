#########################################################################
# ⭐⭐⭐  Set parameters carefully for satisfied performance!   ⭐⭐⭐ #
#########################################################################

mass        : 0.96 # kg 无人机质量
gra         : 9.81 # 重力加速度
pose_solver : 1     # 0:From ZhepeiWang (drag & less singular) 1:From ZhepeiWang, 2:From rotor-drag  姿态解算算法   
ctrl_freq_max   : 100.0 #最大控制频率
use_bodyrate_ctrl: false #是否使用角速率控制模式(若不使用角速度控制，则使用姿态控啊hi，控制器直接计算期望的姿态角或者推力矢量)
max_manual_vel: 0.8 # 操作限制(手动遥控模式下允许的最大水平速度，
max_angle: 30  # Attitude angle limit in degree. A negative value means no limit. 无人机允许的最大姿态角(roll和pitch)
low_voltage: 13.2 # 4S battery 电池电压阈值

rc_reverse: # *控制通道需不需要反向
    roll: false
    pitch: false
    yaw: false
    throttle: false

auto_takeoff_land: #配置自动起飞降落
    enable: true #启用自动起飞降落
    enable_auto_arm: true # 在自动起飞时，自动解锁电机
    no_RC: false # 需要遥控器遥控器信号才能触发自动起飞
    takeoff_height: 0.5 # 自动起飞的目标高度
    takeoff_land_speed: 0.3 # m/s # 自动起飞和降落过程中的垂直速度

thrust_model: # The model that maps thrust signal u(0~1) to real thrust force F(Unit:N): F=K1*Voltage^K2*(K3*u^2+(1-K3)*u).  推力模型
    print_value: false # display the value of “thr_scale_compensate” or “hover_percentage” during thrust model estimating. 在估计模型推力参数时，是否在控制台打印补偿值或者悬停油门百分比
    accurate_thrust_model: false  # This can always enabled if don't require accurate control performance :-) 是否使用精确的推力模型
    # accurate thrust mapping parameters这些参数都需要精确校准，这些参数和电池电压和控制信号共同决定推力
    K1: 0.7583 # Needs precise calibration!
    K2: 1.6942 # Needs precise calibration!
    K3: 0.6786 # Needs precise calibration! K3 equals THR_MDL_FAC in https://docs.px4.io/master/en/config_mc/pid_tuning_guide_multicopter.html.
    # approximate thrust mapping parameters
    hover_percentage: 0.25  # Thrust percentage in Stabilize/Arco mode # * 近似模型参数:表示在稳定模式下，飞机悬停时油门控制信号的值

gain: 
    # Cascade PID controller. Recommend to read the code.
    Kp0: 1.5 #位置控制的三个增益
    Kp1: 1.5 
    Kp2: 1.5
    Kv0: 1.5 #速度控制的三个增益
    Kv1: 1.5
    Kv2: 1.5
    # ↓↓↓ No use now --
    Kvi0: 0.0 
    Kvi1: 0.0
    Kvi2: 0.0
    Kvd0: 0.0
    Kvd1: 0.0
    Kvd2: 0.0
    # ↓↓↓ Only used in rate control mode.
    KAngR: 20.0 #仅在角速率模式下使用该参数
    KAngP: 20.0
    KAngY: 20.0

rotor_drag: #旋翼阻力
    x: 0.0  # The reduced acceleration on each axis caused by rotor drag. Unit:(m*s^-2)/(m*s^-1).
    y: 0.0  # Same as above
    z: 0.0  # Same as above
    k_thrust_horz: 0.0 # Set to 0 recommended... --

msg_timeout: # 定义系统认为某个关键数据源丢失之前等待其更新的最长时间
    odom: 0.5
    rc:   0.5
    cmd:  0.5
    imu:  0.5
    bat:  0.5
